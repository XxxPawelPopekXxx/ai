<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PopekAI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{display:flex;height:100vh;background:#0b0f19;color:#e5e7eb;}

/* SIDEBAR */
.sidebar{
    width:260px;background:#111827;padding:20px;
    display:flex;flex-direction:column;border-right:1px solid #1f2937;
}
.sidebar h2{font-size:18px;margin-bottom:20px;color:#a78bfa;}
.newchat, .clearHistory{
    background:#7c3aed;padding:10px;border:none;
    border-radius:8px;color:white;cursor:pointer;margin-bottom:10px;
}

/* MAIN */
.main{flex:1;display:flex;flex-direction:column;}
.chat{
    flex:1;overflow-y:auto;padding:40px;
    display:flex;flex-direction:column;gap:25px;
}
.message{max-width:700px;line-height:1.6;}
.user{
    align-self:flex-end;background:#1f2937;
    padding:14px 18px;border-radius:18px 18px 6px 18px;
}
.bot{align-self:flex-start;}
.botContent{
    background:#111827;padding:18px;
    border-radius:18px 18px 18px 6px;
    border:1px solid #1f2937;
}
.botContent img{
    margin-top:15px;max-width:100%;border-radius:12px;
}

/* INPUT */
.inputArea{
    padding:20px 40px 10px 40px;
    border-top:1px solid #1f2937;background:#0b0f19;
}
.inputBox{
    display:flex;background:#111827;
    border-radius:14px;padding:10px;border:1px solid #1f2937;
}
input{
    flex:1;background:transparent;border:none;
    outline:none;color:white;font-size:14px;
}
button.send{
    background:#7c3aed;border:none;
    padding:10px 16px;border-radius:10px;
    color:white;cursor:pointer;
}
.disclaimer{
    font-size:11px;opacity:0.5;margin-top:8px;padding-left:4px;
}
.typing{opacity:0.6;font-style:italic;}
</style>
</head>
<body>

<div class="sidebar">
    <h2>PopekAI</h2>
    <button class="newchat" onclick="newChat()">+ Nowy czat</button>
    <button class="clearHistory" onclick="clearHistory()">UsuÅ„ historiÄ™ czatu</button>
</div>

<div class="main">
    <div class="chat" id="chat"></div>

    <div class="inputArea">
        <div class="inputBox">
            <input type="text" id="userInput" placeholder="Napisz wiadomoÅ›Ä‡..." />
            <button class="send" onclick="sendMessage()">WyÅ›lij</button>
        </div>
        <div class="disclaimer">
            PopekAI moÅ¼e popeÅ‚niaÄ‡ poprawne odpowiedzi. SprawdÅº swoje okna.
        </div>
    </div>
</div>

<script>
const responses = [
"Jestem popek i robie duÅ¼e kloce ðŸ˜Š.",
"Domki w SÅ‚upsku, sperma w dupsku",
"Wujek mnie molestowaÅ‚ kiedy miaÅ‚em lat 6",
"Auf der Heide blÃ¼ht ein kleines BlÃ¼melein und das heiÃŸt Erika",
"43215 + 84953= 128168ðŸ¤‘",
"FTG",
"lubie w dupeâ¤ï¸",
"Nie rozumiem ciÄ™.",
"Wal siÄ™",
"SkÄ…d mam wiedzieÄ‡",
"ðŸ˜˜ðŸ˜‘ðŸ˜¯ðŸ¤¤ðŸ˜ ðŸ¤ ðŸ¤¢ðŸ’©ðŸ‘¾ðŸ—ðŸ„ðŸ§ ðŸ‘©â€ðŸ¦³ðŸ¤½ðŸ’….",
"Mam tÄ™czowe jÄ…derkaðŸŒˆ",
"Filip ma raka prostaty",
"Filip ma raka jÄ…der",
"Ok"
];

let currentConversation = [];

// Wczytaj zapisane wiadomoÅ›ci przy starcie
function loadSaved(){
    const saved=localStorage.getItem("popekAI_currentConversation");
    if(saved){
        currentConversation = JSON.parse(saved);
        currentConversation.forEach(msg=>{
            addMessage(msg.role, msg.text, msg.imageNumber, false);
        });
    }
}

// Zapisz wiadomoÅ›ci w localStorage
function saveConversation(){
    localStorage.setItem("popekAI_currentConversation", JSON.stringify(currentConversation));
}

// Dodaj wiadomoÅ›Ä‡ do czatu
function addMessage(role, text, imageNumber=null, save=true){
    const chat=document.getElementById("chat");
    const msg=document.createElement("div");
    msg.className="message "+role;

    if(role==="bot"){
        const content=document.createElement("div");
        content.className="botContent";
        content.textContent=text;

        if(imageNumber){
            const img=document.createElement("img");
            img.src="photo"+imageNumber+".png";
            content.appendChild(img);
        }

        msg.appendChild(content);
    } else {
        msg.textContent=text;
    }

    chat.appendChild(msg);
    chat.scrollTop=chat.scrollHeight;

    if(save){
        currentConversation.push({role,text,imageNumber});
        saveConversation();
    }
}

// Wyslij wiadomoÅ›Ä‡ uÅ¼ytkownika
function sendMessage(){
    const input=document.getElementById("userInput");
    if(input.value.trim()==="") return;

    addMessage("user", input.value);
    input.value="";

    const chat=document.getElementById("chat");
    const typing=document.createElement("div");
    typing.className="message bot typing";
    typing.textContent="PopekAI pisze...";
    chat.appendChild(typing);
    chat.scrollTop=chat.scrollHeight;

    setTimeout(()=>{
        chat.removeChild(typing);

        const randomIndex=Math.floor(Math.random()*responses.length);
        const randomImage=Math.floor(Math.random()*15)+1;

        addMessage("bot", responses[randomIndex], randomImage);
    },1000);
}

// Nowy czat â€“ czyÅ›ci bieÅ¼Ä…cÄ… rozmowÄ™
function newChat(){
    currentConversation = [];
    document.getElementById("chat").innerHTML="";
    saveConversation();
}

// UsuÅ„ historiÄ™ czatu
function clearHistory(){
    currentConversation = [];
    document.getElementById("chat").innerHTML="";
    localStorage.removeItem("popekAI_currentConversation");
}

// Enter wysyÅ‚a wiadomoÅ›Ä‡
document.getElementById("userInput")
.addEventListener("keydown",function(e){
    if(e.key==="Enter"){
        e.preventDefault();
        sendMessage();
    }
});

// Wczytaj przy starcie
loadSaved();

</script>

</body>
</html>
