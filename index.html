<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PopekAI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{display:flex;height:100vh;background:#0b0f19;color:#e5e7eb;}

.sidebar{
    width:260px;background:#111827;padding:20px;
    display:flex;flex-direction:column;border-right:1px solid #1f2937;
}

.sidebar h2{font-size:18px;margin-bottom:20px;color:#a78bfa;}

.newchat{
    background:#7c3aed;padding:10px;border:none;
    border-radius:8px;color:white;cursor:pointer;margin-bottom:20px;
}

.history{
    font-size:13px;
}

.history p{
    opacity:0.7;
    margin-bottom:10px;
    cursor:pointer;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}

.history p:hover{opacity:1;color:#a78bfa;}

.main{flex:1;display:flex;flex-direction:column;}

.chat{
    flex:1;overflow-y:auto;padding:40px;
    display:flex;flex-direction:column;gap:25px;
}

.message{max-width:700px;line-height:1.6;}
.user{
    align-self:flex-end;background:#1f2937;
    padding:14px 18px;border-radius:18px 18px 6px 18px;
}
.bot{align-self:flex-start;}

.botContent{
    background:#111827;padding:18px;
    border-radius:18px 18px 18px 6px;
    border:1px solid #1f2937;
}

.botContent img{
    margin-top:15px;max-width:100%;border-radius:12px;
}

.inputArea{
    padding:20px 40px 10px 40px;
    border-top:1px solid #1f2937;background:#0b0f19;
}

.inputBox{
    display:flex;background:#111827;
    border-radius:14px;padding:10px;border:1px solid #1f2937;
}

input{
    flex:1;background:transparent;border:none;
    outline:none;color:white;font-size:14px;
}

button.send{
    background:#7c3aed;border:none;
    padding:10px 16px;border-radius:10px;
    color:white;cursor:pointer;
}

.disclaimer{
    font-size:11px;opacity:0.5;margin-top:8px;padding-left:4px;
}

.typing{opacity:0.6;font-style:italic;}
</style>
</head>
<body>

<div class="sidebar">
    <h2>PopekAI</h2>
    <button class="newchat" onclick="newChat()">+ Nowy czat</button>
    <div class="history" id="history"></div>
</div>

<div class="main">
    <div class="chat" id="chat"></div>

    <div class="inputArea">
        <div class="inputBox">
            <input type="text" id="userInput" placeholder="Napisz wiadomo≈õƒá..." />
            <button class="send" onclick="sendMessage()">Wy≈õlij</button>
        </div>
        <div class="disclaimer">
            PopekAI mo≈ºe pope≈Çniaƒá poprawne odpowiedzi. Sprawd≈∫ swoje okna.
        </div>
    </div>
</div>

<script>

const responses = [
"Jestem popek i robie du≈ºe kloce üòä.",
"Domki w S≈Çupsku, sperma w dupsku",
"Wujek mnie molestowa≈Ç kiedy mia≈Çem lat 6",
"Auf der Heide bl√ºht ein kleines Bl√ºmelein und das hei√üt Erika",
"43215 + 84953= 128168ü§ë",
"FTG",
"lubie w dupe‚ù§Ô∏è",
"Nie rozumiem ciƒô.",
"Wal siƒô",
"SkƒÖd mam wiedzieƒá",
"üòòüòëüòØü§§üò†ü§†ü§¢üí©üëæüêóüêÑüß†üë©‚Äçü¶≥ü§ΩüíÖ.",
"Mam tƒôczowe jƒÖderkaüåà",
"Filip ma raka prostaty",
"Filip ma raka jƒÖder",
"Ok"
];

let conversations = [];
let currentConversation = [];

function newChat(){
    if(currentConversation.length > 0){
        conversations.push(currentConversation);
        saveConversations();
        updateSidebar();
    }
    currentConversation = [];
    document.getElementById("chat").innerHTML="";
}

function sendMessage(){
    const input=document.getElementById("userInput");
    const chat=document.getElementById("chat");
    if(input.value.trim()==="") return;

    const userText = input.value;

    addMessage("user", userText);
    input.value="";

    const typing=document.createElement("div");
    typing.className="message bot typing";
    typing.textContent="PopekAI pisze...";
    chat.appendChild(typing);

    setTimeout(()=>{
        chat.removeChild(typing);

        const randomIndex=Math.floor(Math.random()*responses.length);
        const randomImage=Math.floor(Math.random()*15)+1;

        addMessage("bot", responses[randomIndex], randomImage);

    },1000);
}

function addMessage(role, text, imageNumber=null){
    const chat=document.getElementById("chat");

    const msg=document.createElement("div");
    msg.className="message "+role;

    if(role==="bot"){
        const content=document.createElement("div");
        content.className="botContent";
        content.textContent=text;

        if(imageNumber){
            const img=document.createElement("img");
            img.src="photo"+imageNumber+".png";
            content.appendChild(img);
        }

        msg.appendChild(content);
    } else {
        msg.textContent=text;
    }

    chat.appendChild(msg);
    chat.scrollTop=chat.scrollHeight;

    currentConversation.push({role,text,imageNumber});
}

function updateSidebar(){
    const history=document.getElementById("history");
    history.innerHTML="";

    conversations.forEach((conv,index)=>{
        const preview = conv[0]?.text || "Nowa rozmowa";

        const item=document.createElement("p");
        item.textContent=preview;
        item.onclick=()=>loadConversation(index);

        history.appendChild(item);
    });
}

function loadConversation(index){
    const chat=document.getElementById("chat");
    chat.innerHTML="";
    currentConversation = conversations[index];

    currentConversation.forEach(msg=>{
        addMessage(msg.role,msg.text,msg.imageNumber);
    });
}

function saveConversations(){
    localStorage.setItem("popekAI_conversations", JSON.stringify(conversations));
}

function loadSaved(){
    const saved=localStorage.getItem("popekAI_conversations");
    if(saved){
        conversations=JSON.parse(saved);
        updateSidebar();
    }
}

document.getElementById("userInput")
.addEventListener("keydown",function(e){
    if(e.key==="Enter"){
        e.preventDefault();
        sendMessage();
    }
});

loadSaved();

</script>

</body>
</html>
